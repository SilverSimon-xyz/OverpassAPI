@using Overpass.Modelli.Models
@using OverpassAPI.ViewModels
@model NodiOverpassElencoNodiViewModel

@{
	Layout = null;
}
<html>
<head>
	<title>Elenco Nodi Ancona</title>
</head>

<body>
	<h1>Pagina di Elenco Punti Interesse Ancona</h1>

	<form method="get" asp-action="FiltraNodi">
		<label for="tipo">Filtra per tipo:</label>
		<select name="tipo" id="tipo">
			<option value="">-- Seleziona tipo --</option>
			@foreach (var tipo in Model.TipiDisponibili)
			{
				<option value="@tipo" selected="@(Model.filter == tipo)">
					@tipo
				</option>
			}
		</select>
		<button type="submit">Filtra</button>
		<a asp-action="Elenco">Reset</a>
	</form>

	@if (Model.ElencoNodi.Any())
	{
		<table border="1">
			<thead>
				<tr>
					<th>Tipo</th>
					<th>ID</th>
					<th>Lat, Lon</th>
					<th>Nome</th>
					<th>Indirizzo</th>
					<th>Tipo Nodo</th>
					<th>Numero di Telefono</th>
					<th>Email e Sito Web</th>
					<th>Accesso</th>
					<th>Orari di Apertura</th>
					<th>Accessibilità</th>
					<th>Accesso a Internet</th>
				</tr>
			</thead>
			<tbody>
				@foreach (var nodo in Model.ElencoNodi.Where(n => n.tags != null))
				{
					<tr>
						<td>@nodo.type</td>
						<td>@nodo.id</td>
						<td>@nodo.lat , @nodo.lon</td>
						<td>@nodo.tags.name </td>
						<td>@nodo.tags.street, @nodo.tags.housenumber, @nodo.tags.city, @nodo.tags.postcode</td>
						@if (@nodo.tags.amenity != null)
						{
							<td>@nodo.tags.amenity</td>
						}
						else if (@nodo.tags.tourism != null)
						{
							<td>@nodo.tags.tourism</td>
						}
						else if (@nodo.tags.leisure != null)
						{
							<td>@nodo.tags.leisure</td>
						}
						<td>@nodo.tags.phone</td>
						<td>@nodo.tags.email & @nodo.tags.website</td>
						<td>@nodo.tags.access</td>
						<td>@nodo.tags.opening_hours</td>
						<td>@nodo.tags.wheelchair</td>
						<td>@nodo.tags.internet_access</td>
					</tr>
				}
			</tbody>
		</table>
	}
	else
	{
		<p><em>Nessun nodo trovato.</em></p>
	}
	
</body>
</html>

